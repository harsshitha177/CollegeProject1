drop database Event_Hall;
create database Event_Hall;
use Event_Hall;

create table event_organizers(
event_organizer_id int auto_increment primary key,
name varchar(223)  not null,
email varchar(233) not null unique,
phone varchar(223) not null unique,
password varchar(223) not null,
address varchar(255),
status varchar(255)
); 

create table categories(
category_id int auto_increment primary key,
category_name varchar(255) not null
);

create table users(
user_id int auto_increment primary key,
name varchar(223)  not null,
email varchar(233) not null unique,
phone varchar(223) not null unique,
password varchar(223) not null,
address varchar(255)
); 

create table event_halls(
event_hall_id int auto_increment primary key,
event_hall_name varchar(255) not null,
picture varchar(255) not null,
capacity varchar(255) not null,
price_per_hour varchar(255) not null,
location varchar(255) not null,
about longtext,
category_id int,
foreign key (category_id) references categories(category_id)
);

create table event_hall_bookings(
event_hall_booking_id int auto_increment primary key,
booking_date varchar(255),
from_date varchar(255),
to_date varchar(255),
from_time varchar(255),
to_time varchar(255),
event_price varchar(255),
title varchar(255) not null,
description longtext,
status varchar(255) not null,
event_organizer_id int,
foreign key(event_organizer_id) references event_organizers(event_organizer_id),
event_hall_id int,
foreign key(event_hall_id) references event_halls(event_hall_id)
);

create table events(
event_id int auto_increment primary key,
ticket_price  varchar(255),
from_date varchar(255),
to_date varchar(255),
from_time varchar(255),
to_time varchar(255),
title varchar(255) not null,
description longtext,
status varchar(255) not null,
event_hall_booking_id int,
foreign key(event_hall_booking_id) references event_hall_bookings(event_hall_booking_id)
);



create table bookings(
booking_id int auto_increment primary key,
total_price varchar(255),
date varchar(255),
status varchar(255),
no_of_tickets varchar(255),
event_id int,
foreign key(event_id) references events(event_id),
user_id int,
foreign key(user_id) references users(user_id)
);




create table tickets(
ticket_id int auto_increment primary key,
ticket_number varchar(255),
status varchar(255) not null,
name varchar(255) not null,
phone varchar(255),
booking_id int,
foreign key(booking_id) references bookings(booking_id)
);


create table payment(
payment_id int auto_increment primary key,
amount varchar(255) not null,
date varchar(255) not null,
status varchar(255) not null,
cvv varchar(255) not null,
expiry_date varchar(255) not null,
card_number varchar(255) not null,
card_holder_name varchar(255) not null,
card_type varchar(255) not null,
booking_id int,
foreign key(booking_id) references bookings(booking_id)
);

create table reviews(
review_id int auto_increment primary key,
review varchar(255),
rating varchar(255),
date varchar(255),
user_id int,
foreign key(user_id) references users(user_id),
event_id int,
foreign key(event_id) references events(event_id)
);